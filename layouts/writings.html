<!doctype html>
<html>
  <head>
    <title><%= item[:title] %></title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <meta name="author" content="Jeremy Lucas"/>
    <meta name="theme-color" content="#111111"/>
    <link href="/styles/writings.css" rel="stylesheet"/>
  </head>
  <body>
    <% if item[:status] != 'ready' %>
    <header style="background-color: #ff0; color: #000; padding: 1em; font-weight: bold;">
      WARNING: You've somehow managed to stumble upon a WIP document. Feel free to continue
      reading, but don't come crying to me if you find any mistakes!
    </header>
    <% end %>
    <main>
      <article>
        <h1><%= item[:title] %></h1>
        <h6><%= display_date(item) %></h6>
        <%= yield %>
      </article>
      <nav>
        <p><a href="/">&larr; Back to main site</a></p>
      </nav>
      <% if item[:edits] %>
      <aside id="edits">
        <details>
          <summary>Edit history</summary>
          <ol>
          <% item[:edits].each do |edit| %>
            <li><%= edit[:date] %>: <%= edit[:desc] %></li>
          <% end %>
          </ol>
        </details>
      </aside>
      <% end %>
    </main>
    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-60767635-1', 'auto');ga('send', 'pageview');</script>
    <script src="/scripts/scrollProgress.min.js"></script>
    <script>
      scrollProgress.set({
        color: '#0ca',
        height: '3px',
        bottom: false
      });
    </script>
  </body>
</html>
